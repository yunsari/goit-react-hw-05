import { useEffect, useState } from "react";
import { useParams } from "react-router-dom";
import { fetchMovieCast } from "../api";

import styles from "./MovieCast.module.css";

export default function Cast() {
  const { id } = useParams();
  const [cast, setCast] = useState([]);

  useEffect(() => {
    async function loadCast() {
      try {
        const data = await fetchMovieCast(id);
        setCast(data.cast);
      } catch (err) {
        console.error(err);
      }
    }

    loadCast();
  }, [id]);

  if (!cast.length) return <p>No cast information.</p>;

  return (
    <ul className={styles["cast-list"]}>
      {cast.map((actor) => (
        <li key={actor.credit_id} className={styles["cast-item"]}>
          <img
            className={styles["cast-img"]}
            src={
              actor.profile_path
                ? `https://image.tmdb.org/t/p/w200${actor.profile_path}`
                : "data:image/jpeg;base64,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"
            }
            alt={actor.name}
          />
          <p className={styles["cast-name"]}>{actor.name}</p>
          <p className={styles["cast-char"]}>{actor.character}</p>
        </li>
      ))}
    </ul>
  );
}
